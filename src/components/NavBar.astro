---
import logo from "../assets/Inspirational.webp";

const pages = Object.values(import.meta.glob('/src/pages/*.md', { eager: true }));

console.log(pages);
---

<nav class="navbar is-primary" role="navigation" aria-label="main navigation" id="navbar">
    <div class="navbar-brand">
        <a class="navbar-item" href="/">
            <img height="300" src={logo.src} alt="Inspriational Creations logo">
        </a>
        <a role="button" class="navbar-burger" data-target="navMenu" aria-label="menu" aria-expanded="false">
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
        </a>
    </div>

    <div class="navbar-menu" id="navMenu">
        <div class="navbar-start">
            <a class="navbar-item" href="/">
                Home
            </a>
            <a class="navbar-item" href="/all-products">
                All Products
            </a>
            <a class="navbar-item" href="/categories">
                Categories
            </a>
            <!-- Gets any additional content pages and adds them to the navbar -->
            {pages.map(page => 
                    <a class ="navbar-item" href={page.url}>{page.frontmatter.title}</a>
            )}
        </div>
    </div>
</nav>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        // Navbar code fron Bulma because I don't know good JS

        // Get all "navbar-burger" elements
        const $navbarBurgers = Array.prototype.slice.call(document.querySelectorAll('.navbar-burger'), 0);

        // Add a click event on each of them
        $navbarBurgers.forEach( el => {
            el.addEventListener('click', () => {

            // Get the target from the "data-target" attribute
            const target = el.dataset.target;
            const $target = document.getElementById(target);

            // Toggle the "is-active" class on both the "navbar-burger" and the "navbar-menu"
            el.classList.toggle('is-active');
            $target.classList.toggle('is-active');

            });
        });

    });
</script>